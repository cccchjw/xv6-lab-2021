# pgtbl 实验答案

## 加速系统调用

还有哪些其他 xv6 系统调用可以使用这种共享页面来加速？请解释如何实现。

可以使用共享页面加速的其他 xv6 系统调用包括：

1. getuid() / getgid() - 用户 ID 和组 ID 可以存储在共享页面中，因为它们很少改变且经常被读取。

2. getppid() - 父进程 ID 可以存储在共享页面中，因为它在进程生命周期内不会改变。

3. times() - 进程计时信息可以由内核定期更新，并直接从用户空间读取。

4. uname() - 静态的系统信息可以共享在只读页面中。

关键见解是：任何返回不经常改变（或可预测地改变）的只读数据的系统调用都可以从这种优化中受益。内核可以在适当的时间（如在上下文切换时更新计时信息）更新共享数据，用户空间可以直接读取而无需系统调用的开销。

## 打印页表

根据教材中的图 3-4 解释 vmprint 的输出。第 0 页包含什么？第 2 页包含什么？在用户模式下运行时，进程能否读/写第 1 页映射的内存？倒数第三页包含什么？

基于 vmprint 输出和图 3-4：

- 第 0 页（虚拟地址 0）包含用户代码（文本段）。它具有读取和执行权限。

- 第 2 页包含用户栈。它具有读取和写入权限，并向下增长。

- 在用户模式下运行时，进程可以读/写第 1 页映射的内存，因为第 1 页包含数据段，通常具有读取和写入权限（PTE_R | PTE_W | PTE_U）。

- 倒数第三页（从示例输出中）包含 trampoline 页面，用于在用户模式和内核模式之间切换。它具有读取和执行权限但没有 PTE_U，这意味着用户模式不能直接访问它 - 只有监督者可以使用它。
